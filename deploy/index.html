<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>应用部署 | Adachi-Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Adachi-BOT 文档">

    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style">
    <link rel="preload" href="/assets/js/app.6b73bdab.js" as="script">
    <link rel="preload" href="/assets/js/2.44b34a9f.js" as="script">
    <link rel="preload" href="/assets/js/10.d01f25ba.js" as="script">
    <link rel="prefetch" href="/assets/js/11.53a4d326.js">
    <link rel="prefetch" href="/assets/js/12.f9727349.js">
    <link rel="prefetch" href="/assets/js/13.1858b456.js">
    <link rel="prefetch" href="/assets/js/14.7be2a619.js">
    <link rel="prefetch" href="/assets/js/15.3ba1d225.js">
    <link rel="prefetch" href="/assets/js/16.03400985.js">
    <link rel="prefetch" href="/assets/js/17.4dfe5a25.js">
    <link rel="prefetch" href="/assets/js/18.424fc946.js">
    <link rel="prefetch" href="/assets/js/19.1945b3f1.js">
    <link rel="prefetch" href="/assets/js/3.907d2391.js">
    <link rel="prefetch" href="/assets/js/4.9c0d3927.js">
    <link rel="prefetch" href="/assets/js/5.8fb2962b.js">
    <link rel="prefetch" href="/assets/js/6.7a505dc8.js">
    <link rel="prefetch" href="/assets/js/7.1ebac3c6.js">
    <link rel="prefetch" href="/assets/js/8.36c555c6.js">
    <link rel="prefetch" href="/assets/js/9.738eb43d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
</head>
<body>
<div id="app" data-server-rendered="true">
    <div class="theme-container">
        <header class="navbar">
            <div class="sidebar-button">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
                     role="img" viewBox="0 0 448 512" class="icon">
                    <path fill="currentColor"
                          d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
                </svg>
            </div>
            <a href="/" class="home-link router-link-active"><!----> <span
                    class="site-name">Adachi-Docs</span></a>
            <div class="links">
                <div class="search-box"><input aria-label="Search"
                                               autocomplete="off"
                                               spellcheck="false" value="">
                    <!----></div>
                <nav class="nav-links can-hide">
                    <div class="nav-item"><a href="/deploy/" aria-current="page"
                                             class="nav-link router-link-exact-active router-link-active">
                        部署
                    </a></div>
                    <div class="nav-item"><a href="/config/" class="nav-link">
                        配置
                    </a></div>
                    <div class="nav-item"><a href="/thank/" class="nav-link">
                        致谢
                    </a></div>
                    <div class="nav-item"><a href="/picture/" class="nav-link">
                        图片
                    </a></div>
                    <div class="nav-item"><a href="/statement/"
                                             class="nav-link">
                        声明
                    </a></div>
                    <div class="nav-item"><a href="/developer/"
                                             class="nav-link">
                        开发者
                    </a></div>
                    <div class="nav-item"><a href="/web-console/"
                                             class="nav-link">
                        控制台
                    </a></div>
                    <div class="nav-item"><a href="/faq/" class="nav-link">
                        常见问题
                    </a></div>
                    <div class="nav-item"><a href="/changelog/"
                                             class="nav-link">
                        更新日志
                    </a></div>
                    <div class="nav-item"><a
                            href="https://github.com/SilveryStar/Adachi-BOT"
                            target="_blank" rel="noopener noreferrer"
                            class="nav-link external">
                        GitHub
                        <span><svg xmlns="http://www.w3.org/2000/svg"
                                   aria-hidden="true" focusable="false" x="0px"
                                   y="0px" viewBox="0 0 100 100" width="15"
                                   height="15" class="icon outbound"><path
                                fill="currentColor"
                                d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon
                                fill="currentColor"
                                points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span
                                class="sr-only">(opens new window)</span></span></a>
                    </div> <!----></nav>
            </div>
        </header>
        <div class="sidebar-mask"></div>
        <aside class="sidebar">
            <nav class="nav-links">
                <div class="nav-item"><a href="/deploy/" aria-current="page"
                                         class="nav-link router-link-exact-active router-link-active">
                    部署
                </a></div>
                <div class="nav-item"><a href="/config/" class="nav-link">
                    配置
                </a></div>
                <div class="nav-item"><a href="/thank/" class="nav-link">
                    致谢
                </a></div>
                <div class="nav-item"><a href="/picture/" class="nav-link">
                    图片
                </a></div>
                <div class="nav-item"><a href="/statement/" class="nav-link">
                    声明
                </a></div>
                <div class="nav-item"><a href="/developer/" class="nav-link">
                    开发者
                </a></div>
                <div class="nav-item"><a href="/web-console/" class="nav-link">
                    控制台
                </a></div>
                <div class="nav-item"><a href="/faq/" class="nav-link">
                    常见问题
                </a></div>
                <div class="nav-item"><a href="/changelog/" class="nav-link">
                    更新日志
                </a></div>
                <div class="nav-item"><a
                        href="https://github.com/SilveryStar/Adachi-BOT"
                        target="_blank" rel="noopener noreferrer"
                        class="nav-link external">
                    GitHub
                    <span><svg xmlns="http://www.w3.org/2000/svg"
                               aria-hidden="true" focusable="false" x="0px"
                               y="0px" viewBox="0 0 100 100" width="15"
                               height="15" class="icon outbound"><path
                            fill="currentColor"
                            d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon
                            fill="currentColor"
                            points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span
                            class="sr-only">(opens new window)</span></span></a>
                </div> <!----></nav>
            <ul class="sidebar-links">
                <li>
                    <section class="sidebar-group depth-0"><p
                            class="sidebar-heading open"><span>应用部署</span>
                        <!----></p>
                        <ul class="sidebar-links sidebar-group-items">
                            <li><a href="/deploy/#docker" class="sidebar-link">Docker</a>
                                <ul class="sidebar-sub-headers">
                                    <li class="sidebar-sub-header"><a
                                            href="/deploy/#安装及启动"
                                            class="sidebar-link">安装及启动</a></li>
                                    <li class="sidebar-sub-header"><a
                                            href="/deploy/#更新"
                                            class="sidebar-link">更新</a></li>
                                </ul>
                            </li>
                            <li><a href="/deploy/#pm2"
                                   class="sidebar-link">PM2</a>
                                <ul class="sidebar-sub-headers">
                                    <li class="sidebar-sub-header"><a
                                            href="/deploy/#安装"
                                            class="sidebar-link">安装</a></li>
                                    <li class="sidebar-sub-header"><a
                                            href="/deploy/#更新-2"
                                            class="sidebar-link">更新</a></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                </li>
            </ul>
        </aside>
        <main class="page">
            <div class="theme-default-content content__default"><h1 id="应用部署"><a
                    href="#应用部署" class="header-anchor">#</a> 应用部署</h1>
                <div class="custom-block tip"><p class="custom-block-title">
                    TIP</p>
                    <p>以下内容仅介绍 Linux 环境中部署方式，如果你希望在 Windows 中部署，请参考 <a
                            href="/deploy/windows.html">这里</a></p></div>
                <h2 id="docker"><a href="#docker" class="header-anchor">#</a>
                    Docker</h2>
                <h3 id="安装及启动"><a href="#安装及启动" class="header-anchor">#</a>
                    安装及启动</h3>
                <div class="language-bash extra-class"><pre
                        class="language-bash"><code><span
                        class="token function">git</span> clone https://ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git
<span class="token builtin class-name">cd</span> Adachi-BOT

docker-compose up -d
docker-compose restart
</code></pre>
                </div>
                <h3 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h3>
                <div class="language-bash extra-class"><pre
                        class="language-bash"><code><span class="token comment"># 注意需在 Adachi-BOT 根目录中运行命令</span>
<span class="token function">git</span> pull
docker-compose restart
<span class="token comment"># 如果涉及更新Dockerfile文件则需要docker-compose down 然后 docker-compose up -d --build</span>
</code></pre>
                </div>
                <h2 id="pm2"><a href="#pm2" class="header-anchor">#</a> PM2</h2>
                <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3>
                <div class="language-bash extra-class"><pre
                        class="language-bash"><code><span class="token comment"># 注意：此方法在 Windows 环境中不可用</span>
<span class="token function">git</span> clone https://ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git
<span class="token builtin class-name">cd</span> Adachi-BOT
<span class="token function">npm</span> <span
                            class="token function">install</span> -g pm2

<span class="token comment"># 初次运行将生成配置文件模板</span>
<span class="token comment"># 根据右上角「配置」选项中的信息配置 setting.yml</span>
<span class="token function">npm</span> start

<span class="token comment"># 确保你已经在 56379 端口上运行 Redis 数据库</span>
<span class="token comment"># 不会启动数据库的可以参考右上角「FAQ」中的信息</span>
<span class="token function">npm</span> run restart
</code></pre>
                </div>
                <h3 id="更新-2"><a href="#更新-2" class="header-anchor">#</a> 更新
                </h3> <h4 id="服务器更新"><a href="#服务器更新"
                                        class="header-anchor">#</a> 服务器更新</h4>
                <div class="language-bash extra-class"><pre
                        class="language-bash"><code><span
                        class="token function">git</span> pull
<span class="token comment"># 如果提示本地有更改可通过 git checkout package*.json (一般会改动的都是package-lock.json文件)</span>
<span class="token comment"># 如果改的了其他的可用git reset --hard 把本地改过的全部回滚。</span>
<span class="token function">npm</span> run restart
</code></pre>
                </div>
                <p>
                    下载<code>zip</code>包的方式非常不推荐，但你实在想要用，那么要想更新则需要重新下载<code>zip</code>包备份项目里的<code>database</code>、<code>data</code>、<code>config</code>、<code>src\plugins\你安装的插件</code>等文件，然后把这些文件按照它原本的位置放在新的项目文件夹里。
                </p> <h4 id="指令更新"><a href="#指令更新" class="header-anchor">#</a>
                    指令更新</h4>
                <p>使用指令更新的前提是你是通过<code>git</code>下载的项目，下载<code>zip</code>包的方式不可用该方式。
                </p>
                <div class="language- extra-class"><pre
                        class="language-text"><code>命令: &lt;header&gt; upgrade
范围: 私聊
权限: BOT主人 (Master)
</code></pre>
                </div>
            </div>
            <footer class="page-edit"><!----> <!----></footer> <!----> </main>
    </div>
    <div class="global-ui"></div>
</div>
<script src="/assets/js/app.6b73bdab.js" defer></script>
<script src="/assets/js/2.44b34a9f.js" defer></script>
<script src="/assets/js/10.d01f25ba.js" defer></script>
</body>
</html>
